## 3D æ¸²æŸ“

SpriteJS<super>Next</super>æä¾›äº†[3D æ‰©å±•](https://github.com/spritejs/sprite-extend-3d)ï¼Œå€ŸåŠ©å®ƒå¯ä»¥åŠ è½½å¹¶æ¸²æŸ“3Dæ¨¡å‹ï¼Œè¿™æ ·SpriteJSå°±å¯ä»¥ä¸å€ŸåŠ©å…¶ä»–æ¡†æ¶å’Œåº“ï¼Œç‹¬ç«‹å®Œæˆ3Dæ¸²æŸ“ã€‚

ğŸ’¡**æ³¨æ„**ï¼Œ3Dæ‰©å±•çš„å¼€å‘ä»å¤„äºalphaç‰ˆé˜¶æ®µï¼Œç”Ÿäº§ç¯å¢ƒä¸­åº”è°¨æ…ä½¿ç”¨ï¼Œç›®å‰æ¨èä¾ç„¶é‡‡ç”¨[ç¬¬ä¸‰æ–¹åº“ååŒæ–¹å¼](http://localhost:3000/#/zh-cn/guide/ticker)ã€‚

### æ¸²æŸ“3Dæ¨¡å‹

SpriteJS<super>Next</super>çš„3Dæ‰©å±•åŸºäº[OGL](https://github.com/oframe/ogl)ã€‚

é€šè¿‡OGLåº•å±‚ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ¸²æŸ“å‡º3Dæ¨¡å‹å¹¶ä¸ä¹‹äº¤äº’ã€‚

```js
const {Scene} = spritejs;
const {Mesh3d, shaders} = spritejs.ext3d;
const container = document.getElementById('container');
const scene = new Scene({
  container,
  displayRatio: 2,
});
const layer = scene.layer3d('fglayer', {
  camera: {
    fov: 35,
  },
  directionalLight: [0.5, 1.0, -0.3, 0.15],
});

layer.camera.attributes.pos = [8, 5, 15];
layer.camera.lookAt([0, 1.5, 0]);

const texture = layer.createTexture('https://p3.ssl.qhimg.com/t01d6c6c93fdddf1e42.jpg');
const program = layer.createProgram({
  ...shaders.BASE_TEXTURE,
  texture,
});

const model = layer.loadModel('https://s5.ssl.qhres.com/static/1eb3e9b91a296abd.json');
const fox = new Mesh3d(program, {model});
layer.append(fox);
layer.setOrbit();
```

<iframe src="/demo/#/3d/fox" height="450"></iframe>

### ä½¿ç”¨å‡ ä½•å›¾å½¢ç±»

æˆ‘ä»¬ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨å‡ ä½•å›¾å½¢ç±»åˆ›å»ºå‡ ä½•å…ƒç´ ã€‚

ç›®å‰æ”¯æŒçš„å…ƒç´ æœ‰ï¼š

- Cube - ç«‹æ–¹ä½“
- Cylinder - åœ†æŸ±ä½“
- Plane - å¹³é¢
- Sphere - çƒä½“

```js
const {Scene} = spritejs;
const {Cylinder, Sphere, Cube, shaders} = spritejs.ext3d;
const container = document.getElementById('container');
const scene = new Scene({
  container,
  displayRatio: 2,
});
const layer = scene.layer3d('fglayer', {
  directionalLight: [1, 0, 0, 0.5],
  pointLightColor: `hsl(${Math.floor(360 * Math.random())}, 50%, 50%)`,
  pointLightPosition: [5, 3, 6],
  camera: {
    fov: 35,
  },
});

layer.camera.attributes.pos = [5, 3, 6];
layer.camera.lookAt([0, 0, 0]);

const program = layer.createProgram({
  ...shaders.BASE_GEOMETRY,
  cullFace: null,
  uniforms: {
    lighting: {value: [0.3, 0.8, 0.6, 0.1]},
  },
});

const cylinder = new Cylinder(program);
cylinder.attributes.pos = [0, 1.3, 0];
layer.append(cylinder);
cylinder.animate([
  {rotateY: 0},
  {rotateY: -360},
], {
  duration: 10000,
  iterations: Infinity,
});

const sphere = new Sphere(program);
sphere.attr({
  phiLength: Math.PI,
});
layer.append(sphere);
sphere.animate([
  {rotateY: 0},
  {rotateY: -360},
], {
  duration: 7500,
  iterations: Infinity,
});

const cube = new Cube(program);
cube.attributes.pos = [0, -1.3, 0];
layer.append(cube);
cube.animate([
  {rotateY: 0},
  {rotateY: -360},
], {
  duration: 5000,
  iterations: Infinity,
});

layer.setRaycast();

layer.addEventListener('click', (evt) => {
  if(evt.target === cube) {
    const colors = [];
    for(let i = 0; i < 3; i++) {
      const randomColor = `hsl(${Math.floor(360 * Math.random())}, 50%, 50%)`;
      colors.push(randomColor, randomColor);
    }
    evt.target.attributes.colors = colors;
  } else if(evt.target !== layer) {
    evt.target.attributes.colors = `hsl(${Math.floor(360 * Math.random())}, 50%, 50%)`;
  }
});
```

è¯•è¯•ç”¨é¼ æ ‡ç‚¹å‡»è¿™äº›å‡ ä½•ä½“ï¼š

<iframe src="/demo/#/3d/basic" height="750"></iframe>

æ›´å¤šå†…å®¹è¯¦è§[3Dæ‰©å±•](/zh-cn/ext3d/index)